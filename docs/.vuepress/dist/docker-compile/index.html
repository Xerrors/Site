<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker 安装并配置 | Angor</title>
    <meta name="description" content="Angor playground">
    <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.59f1e3ac.css" as="style"><link rel="preload" href="/assets/js/app.a7fe40b8.js" as="script"><link rel="preload" href="/assets/js/6.1c22fd82.js" as="script"><link rel="preload" href="/assets/js/29.8d4c92c2.js" as="script"><link rel="prefetch" href="/assets/js/1.bdd22c0d.js"><link rel="prefetch" href="/assets/js/10.dbeec28a.js"><link rel="prefetch" href="/assets/js/11.e996146e.js"><link rel="prefetch" href="/assets/js/12.ce5dad9d.js"><link rel="prefetch" href="/assets/js/13.9858bcff.js"><link rel="prefetch" href="/assets/js/14.4a1ebc8e.js"><link rel="prefetch" href="/assets/js/15.5681e925.js"><link rel="prefetch" href="/assets/js/16.877464bd.js"><link rel="prefetch" href="/assets/js/17.1e2c88dd.js"><link rel="prefetch" href="/assets/js/18.69fd6786.js"><link rel="prefetch" href="/assets/js/19.4e2f9796.js"><link rel="prefetch" href="/assets/js/2.8a3b3946.js"><link rel="prefetch" href="/assets/js/20.2d357f89.js"><link rel="prefetch" href="/assets/js/21.41baeba2.js"><link rel="prefetch" href="/assets/js/22.84600a8d.js"><link rel="prefetch" href="/assets/js/23.da374aa9.js"><link rel="prefetch" href="/assets/js/24.c26e4f78.js"><link rel="prefetch" href="/assets/js/25.e0044ee7.js"><link rel="prefetch" href="/assets/js/26.f5cd8115.js"><link rel="prefetch" href="/assets/js/27.1227d439.js"><link rel="prefetch" href="/assets/js/28.624edb6a.js"><link rel="prefetch" href="/assets/js/30.e9199b30.js"><link rel="prefetch" href="/assets/js/31.81547259.js"><link rel="prefetch" href="/assets/js/32.aaeaef27.js"><link rel="prefetch" href="/assets/js/33.12b2876c.js"><link rel="prefetch" href="/assets/js/34.8403812d.js"><link rel="prefetch" href="/assets/js/35.9f8c8803.js"><link rel="prefetch" href="/assets/js/36.6a27891b.js"><link rel="prefetch" href="/assets/js/37.3d8a40bd.js"><link rel="prefetch" href="/assets/js/38.37a2245f.js"><link rel="prefetch" href="/assets/js/39.ec49ea00.js"><link rel="prefetch" href="/assets/js/4.3ac9c33b.js"><link rel="prefetch" href="/assets/js/5.2cd1cf13.js"><link rel="prefetch" href="/assets/js/7.c25dfe4e.js"><link rel="prefetch" href="/assets/js/8.bea74aad.js"><link rel="prefetch" href="/assets/js/9.4e6240e3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.59f1e3ac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><!----> <div id="my-bg"></div> <header class="navbar my-nav"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/avatar.jpg" alt="Angor" class="logo"> <span class="site-name can-hide">Angor</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">📃 文章</a></div><div class="nav-item"><a href="/cool/music.html" class="nav-link">🎵 音乐</a></div><div class="nav-item"><a href="/cool/zone.html" class="nav-link">🤪 动态</a></div><div class="nav-item"><a href="/tools/guide.html" class="nav-link">🚥 导航</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">🔨 工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/findpwd.html" class="nav-link">🔐 寻密</a></li><li class="dropdown-item"><!----> <a href="/about/links.html" class="nav-link">🔗 友链</a></li></ul></div></div> <!----></nav> <a href="https://github.com/Xerrors/Site" class="can-hide" style="display: flex; align-items: center; margin-left: 10px;"><img src="/svg/github.svg" type="image/svg+xml" class="my-svg" style="width: 1.4rem; height: 1.4rem;"></a></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">📃 文章</a></div><div class="nav-item"><a href="/cool/music.html" class="nav-link">🎵 音乐</a></div><div class="nav-item"><a href="/cool/zone.html" class="nav-link">🤪 动态</a></div><div class="nav-item"><a href="/tools/guide.html" class="nav-link">🚥 导航</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">🔨 工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/findpwd.html" class="nav-link">🔐 寻密</a></li><li class="dropdown-item"><!----> <a href="/about/links.html" class="nav-link">🔗 友链</a></li></ul></div></div> <!----></nav>  <!----> </aside> <div><div style="height:4.5rem;width:100%;background:#f0f2f5;"></div> <main class="page"> <div class="my-main"><div class="my-title-box"><h3 class="my-title">Docker 安装并配置</h3> <div style="text-align: center"><span class="el-tag el-tag--small el-tag--light" style="margin:5px;">blog</span><span class="el-tag el-tag--small el-tag--light" style="margin:5px;">Docker</span><span class="el-tag el-tag--small el-tag--light" style="margin:5px;">Linux</span></div></div> <div class="theme-default-content content__default"><p>因为自身电脑是 Windows，使用 Docker 并不是很方便，加上自己的很多工作都是在服务器上完成，所以打算将自己在服务器上面运行的服务都用 Docker 来管理。</p> <p>参考</p> <ul><li><a href="https://docs.docker.com" target="_blank" rel="noopener noreferrer">Docker 官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://yeasy.gitbooks.io/docker_practice/introduction/" target="_blank" rel="noopener noreferrer">Docker 从入门到实践<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.cnblogs.com/sujing/p/11012115.html#top" target="_blank" rel="noopener noreferrer">Docker 指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>这篇博客的环境是 Ubuntu 16.04</p> <h3 id="安装-docker"><a href="#安装-docker" aria-hidden="true" class="header-anchor">#</a> 安装 Docker</h3> <p>这里为了方便就采用了官方的自动脚本安装</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">curl</span> -fsSL get.docker.com -o get-docker.sh
$ <span class="token function">sudo</span> <span class="token function">sh</span> get-docker.sh --mirror Aliyun
</code></pre></div><p>建立用户组并添加 Docker 用户</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 建立 docker 组</span>
$ <span class="token function">sudo</span> <span class="token function">groupadd</span> docker 

<span class="token comment"># 将当前用户加入 docker 组</span>
$ <span class="token function">sudo</span> <span class="token function">usermod</span> -aG docker <span class="token environment constant">$USER</span>
</code></pre></div><h3 id="查看-docker-的基本信息"><a href="#查看-docker-的基本信息" aria-hidden="true" class="header-anchor">#</a> 查看 Docker 的基本信息</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker version <span class="token comment"># 查看版本信息</span>

$ docker info <span class="token comment"># Docker 的基本信息，容器数量、镜像数量、根目录等</span>

$ docker --help <span class="token comment"># 查看帮助信息</span>
</code></pre></div><h3 id="常用命令"><a href="#常用命令" aria-hidden="true" class="header-anchor">#</a> 常用命令</h3> <h4 id="镜像相关的命令"><a href="#镜像相关的命令" aria-hidden="true" class="header-anchor">#</a> 镜像相关的命令</h4> <p>容器相关的命令都比较简单就不分开说了，就到下面很容易看懂</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker images <span class="token comment"># 查看本地的镜像</span>

$ docker rmi <span class="token punctuation">[</span>name/id<span class="token punctuation">]</span> <span class="token comment"># 删除一个镜像</span>

$ docker search <span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token comment"># 搜索远程镜像</span>

$ docker pull <span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token comment"># 从远程拉取一个镜像</span>
</code></pre></div><p>实例</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker search ubuntu <span class="token comment"># 默认使用 latest 标签，拉取最新版本</span>

$ docker pull ubuntu
</code></pre></div><h4 id="容器相关命令"><a href="#容器相关命令" aria-hidden="true" class="header-anchor">#</a> 容器相关命令</h4> <p><strong>首先是运行</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 测试使用的指令</span>
$ docker run -it --rm ubuntu <span class="token function">bash</span>
</code></pre></div><p>docker run 是运行容器的命令，完整的指令是</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker run <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> IMAGE <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARG<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre></div><p>这里简要的说明一下上面用到的参数。</p> <p><code>-it</code>：运行容器的时候启动一个交互式终端，方便我们操作容器</p> <p><code>--rm</code>：这个参数是说容器退出后随之将其删除，使用 <code>--rm</code> 可以避免浪费空间。</p> <p><code>ubuntu</code>：这是指用 <code>ubuntu</code> 镜像为基础来启动容器。</p> <p><code>bash</code>：放在镜像名后的是 <code>命令</code>，这里我们希望有个交互式 Shell，因此用的是 bash。</p> <p>详细的参数如下（挺多的，摘录别人的）：</p> <div class="language-raw extra-class"><pre class="language-text"><code>-d:启动容器，并且后台运行；
-i:以交互模式运行容器，通常与-t同时使用；
-t:为容器重新分配一个伪输入终端，通常与-i同时使用（容器启动后进入到容器内部的命令窗口）；
-P:随机端口映射，容器内部端口随机映射到主机的高端口；
-p:指定端口映射，格式为：主机(宿主)端口:容器端口；
-v:建立宿主机与容器目录的同步；
--name=&quot;myTomcat&quot;: 为容器指定一个名称，否则有个随机的名字）；
</code></pre></div><p>上面的内容又臭又长，我们只需要根据自己的需要记住几个命令就好</p> <ol><li>如果你需要启动一个镜像用来测试一下系统的功能，下次不会再用，可以使用这个命令，实现的功能是启动一个容器并分配一个交互式终端，当退出之后会自动销毁。</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker run -it --rm ubuntu <span class="token function">bash</span>
</code></pre></div><ol start="2"><li>如果需要启动一个容器需要经常使用，同时还需要保存一些文件的。</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker run -it -v /root/ubuntu_wp:/root ubuntu <span class="token function">bash</span>
</code></pre></div><ol start="3"><li>如果同时需要绑定端口，后台运行服务</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker run -d -p <span class="token number">8080</span>:8080 -v /root/ubuntu_wp:/root ubuntu <span class="token punctuation">[</span>command<span class="token punctuation">]</span>
</code></pre></div><p><strong>docker ps</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker <span class="token function">ps</span> <span class="token comment"># 查看正在运行的容器的信息，</span>

$ docker <span class="token function">ps</span> -a <span class="token comment"># 查看运行中的和已经停止的容器</span>
</code></pre></div><p><strong>再次进入正在运行中的容器</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker attach <span class="token number">67</span> <span class="token comment"># 进入正在运行中且id 的为前缀是 67 的容器</span>

$ docker <span class="token builtin class-name">exec</span> <span class="token number">67</span> <span class="token comment"># 进入正在运行中且id 的为前缀是 67 的容器</span>
</code></pre></div><p><code>exec</code> 与 <code>attach</code> 一样都可以再次进入后台运行的容器，但是该命令可以不进入容器而在运行的容器中执行命令。</p> <p><strong>停止、终止、重启容器</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker stop <span class="token punctuation">[</span>id<span class="token punctuation">]</span>  <span class="token comment"># 停止容器</span>

$ docker <span class="token function">kill</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span>  <span class="token comment"># 强制停止容器</span>

$ docker restart <span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token comment"># 重启容器</span>
</code></pre></div><p><strong>删除容器</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker <span class="token function">rm</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token comment"># 删除容器</span>
</code></pre></div><p><strong>启动已终止容器</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker container start <span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token comment"># 直接将一个已经终止的容器启动运行</span>
</code></pre></div><h3 id="在-docker-部署-vuepress"><a href="#在-docker-部署-vuepress" aria-hidden="true" class="header-anchor">#</a> 在 Docker 部署 Vuepress</h3> <h4 id="布置镜像"><a href="#布置镜像" aria-hidden="true" class="header-anchor">#</a> 布置镜像</h4> <p>首先拉取 node 镜像，免得自己安装，当然，也可以直接拉取别人部署好了的 vuepress 镜像，但是上面的镜像良莠不齐，还是自己搭建吧，放心一点</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 拉取镜像</span>
$ docker pull node 

<span class="token comment"># 尝试运行</span>
$ docker run -it --rm node <span class="token function">bash</span>

<span class="token comment"># 查看是否成功（一般都是成功滴）</span>
$ node --version
</code></pre></div><p>之后就可以退出这个容器，再次进入，这次我们进入的时候绑定好端口，绑定好路径映射运行</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 运行指令</span>
$ docker run -it -p <span class="token number">8080</span>:8080 -v /Site/docs:/root/vuepress node <span class="token function">bash</span>
</code></pre></div><h4 id="安装环境"><a href="#安装环境" aria-hidden="true" class="header-anchor">#</a> 安装环境</h4> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 切换路径</span>
$ <span class="token builtin class-name">cd</span> /root/vuepress

<span class="token comment"># 安装 Vuepress</span>
$ <span class="token function">npm</span> <span class="token function">install</span> -g vuepress

<span class="token comment"># 安装依赖</span>
$ <span class="token function">npm</span> <span class="token function">install</span> 
</code></pre></div><p>现在问题来了，在Docker运行的时候，端口是随机的。这咋整呢，，不晓的，以后再说。</p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">修改于: </span> <span class="time">9/1/2019, 10:55:27 AM</span></div></footer> <!----> </main></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a7fe40b8.js" defer></script><script src="/assets/js/6.1c22fd82.js" defer></script><script src="/assets/js/29.8d4c92c2.js" defer></script>
  </body>
</html>
